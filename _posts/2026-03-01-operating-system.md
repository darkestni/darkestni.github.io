---
title: 操作系统
date: 2026-03-01 00:00:00 +0800
categories: [操作系统]
tags: [课程笔记, Linux, 系统编程]
description: 操作系统课程学习笔记和资料
---

## 课程简介

操作系统是管理计算机硬件和软件资源的系统软件，为应用程序提供服务接口。

## 课程资料

| 讲次 | 主题 | 资料 |
|------|------|------|
| L01 | 操作系统简介 | [PDF](/assets/os/L01%20Intro%20to%20OS.pdf) |
| L02 | OS 基础 | [PDF](/assets/os/L02%20OS%20Basics.pdf) |
| L03 | 进程 | [PDF](/assets/os/L03%20Processes.pdf) |
| L04 | CPU 调度 | [PDF](/assets/os/L04%20CPU%20Scheduling.pdf) |
| L05 | 同步 | [PDF](/assets/os/L05%20Synchronization.pdf) |
| L06 | 地址转换 | [PDF](/assets/os/L06%20Address%20Translation.pdf) |
| L07 | 分页 | [PDF](/assets/os/L07%20Paging.pdf) |
| L08 | 按需分页 | [PDF](/assets/os/L08%20Demand%20Paging.pdf) |
| L09 | Linux 内存管理 | [PDF](/assets/os/L09%20Linux%20Memory%20Management.pdf) |
| L10 | I/O | [PDF](/assets/os/L10%20IO.pdf) |
| L11 | 存储 | [PDF](/assets/os/L11%20Storage.pdf) |
| L12 | 文件系统 | [PDF](/assets/os/L12%20FileSys.pdf) |
| L13 | 死锁 | [PDF](/assets/os/L13%20Deadlock.pdf) |

## 实验资料

- [实验环境搭建 (Windows)](/assets/os/实验环境搭建（Windows）(1).pdf)

---

## L01-L02: 操作系统基础

### 操作系统功能

1. **进程管理**：创建、调度、终止进程
2. **内存管理**：分配和回收内存
3. **文件系统**：文件存储和组织
4. **设备管理**：I/O 设备控制
5. **用户接口**：命令行、GUI

### 系统调用

用户程序通过系统调用请求 OS 服务：

| 类型 | 示例 |
|------|------|
| 进程控制 | fork(), exec(), exit() |
| 文件操作 | open(), read(), write(), close() |
| 内存管理 | malloc(), free() |

---

## L03: 进程

### 进程状态

```
新建 → 就绪 ↔ 运行 → 终止
         ↑      ↓
         ← 等待 ←
```

### 进程控制块 (PCB)

包含进程的所有信息：
- 进程 ID (PID)
- 进程状态
- 程序计数器
- CPU 寄存器
- 内存管理信息

### 进程 vs 线程

| 特性 | 进程 | 线程 |
|------|------|------|
| 资源 | 独立地址空间 | 共享地址空间 |
| 通信 | 需要 IPC | 直接共享内存 |
| 开销 | 创建开销大 | 创建开销小 |

---

## L04: CPU 调度

### 调度算法

#### 1. FCFS (先来先服务)

- 按到达顺序执行
- 简单但可能导致"护航效应"

#### 2. SJF (短作业优先)

- 选择预计运行时间最短的进程
- 平均等待时间最短

#### 3. Round Robin (时间片轮转)

- 每个进程分配固定时间片
- 时间片用完回到就绪队列末尾

#### 4. 优先级调度

- 按优先级执行
- 可能导致饥饿（低优先级进程无法执行）

### 调度算法对比

| 算法 | 优点 | 缺点 |
|------|------|------|
| FCFS | 简单公平 | 护航效应 |
| SJF | 平均等待时间短 | 需要预知执行时间 |
| RR | 响应快 | 时间片选择困难 |
| 优先级 | 重要任务优先 | 可能饥饿 |

---

## L05: 进程同步

### 临界区问题

多个进程访问共享资源时，需要互斥访问。

### 信号量 (Semaphore)

```c
// P 操作（等待）
wait(S) {
    while (S <= 0);  // 忙等待
    S--;
}

// V 操作（信号）
signal(S) {
    S++;
}
```

### 经典同步问题

1. **生产者-消费者问题**
2. **读者-写者问题**
3. **哲学家就餐问题**

---

## L06-L08: 内存管理

### 地址转换

- **逻辑地址**：程序生成的地址
- **物理地址**：内存中的实际地址

### 分页机制

```
逻辑地址: [页号 | 页内偏移]
         ↓
    页表转换
         ↓
物理地址: [页框号 | 页内偏移]
```

### 页面置换算法

| 算法 | 说明 |
|------|------|
| OPT | 置换最长时间不用的页面（理论最优） |
| FIFO | 置换最早进入的页面 |
| LRU | 置换最近最少使用的页面 |

---

## L09: Linux 内存管理

### 虚拟内存

- 每个进程有独立的虚拟地址空间
- 通过页表映射到物理内存
- 支持按需加载

---

## L10-L11: I/O 与存储

### I/O 控制方式

1. **程序直接控制**：CPU 轮询
2. **中断驱动**：设备完成后通知 CPU
3. **DMA**：直接内存访问，减少 CPU 参与

### 存储层次

```
CPU 缓存 (L1/L2/L3) → 内存 → SSD → HDD
     快 ←──────────────────────→ 慢
     小 ←──────────────────────→ 大
```

---

## L12: 文件系统

### 文件操作

- 创建、删除、读写
- 打开、关闭
- 定位 (seek)

### 目录结构

- 单级目录
- 两级目录
- 树形目录

### Linux 文件系统

```
/           # 根目录
├── home/   # 用户目录
├── etc/    # 配置文件
├── var/    # 可变数据
└── usr/    # 用户程序
```

---

## L13: 死锁

### 死锁条件（必须同时满足）

1. **互斥**：资源不能共享
2. **持有并等待**：持有资源同时请求其他资源
3. **不可抢占**：资源不能强制剥夺
4. **循环等待**：存在循环等待链

### 死锁处理策略

| 策略 | 说明 |
|------|------|
| 预防 | 破坏必要条件 |
| 避免 | 银行家算法 |
| 检测 | 定期检测死锁 |
| 恢复 | 终止进程或抢占资源 |

---

## 重点知识点总结

- [x] 进程状态与 PCB
- [x] CPU 调度算法对比
- [x] 进程同步与信号量
- [x] 分页与页面置换
- [x] 死锁条件与处理

## 待补充

- [ ] 课后习题
- [ ] 实验笔记
- [ ] Linux 命令实践
